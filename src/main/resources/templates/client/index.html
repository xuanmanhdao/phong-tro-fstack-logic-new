<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.w3.org/1999/xhtml"
      layout:decorate="~{client/layout/default}"
      class="no-js">
<head>
    <title th:text="Trang Chủ"></title>
</head>
<body>
<!-- property area -->
<div layout:fragment="content">
    <div class="slider-area">
        <div class="slider">
            <div id="bg-slider" class="owl-carousel owl-theme">

                <div class="item"><img th:src="@{client/assets/img/slide1/slider-image-2.jpg}" alt="The Last of us">
                </div>
                <div class="item"><img th:src="@{client/assets/img/slide1/slider-image-1.jpg}" alt="GTA V"></div>

            </div>
        </div>
        <div class="container slider-content">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 col-sm-12">
                    <h2>Tìm kiếm chỉ với một cú nhấp chuột</h2>
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eligendi deserunt deleniti, ullam
                        commodi sit ipsam laboriosam velit adipisci quibusdam aliquam teneturo!</p>

                </div>
            </div>
        </div>
    </div>

    <div class="home-lager-shearch"
         style="background-color: rgb(252, 252, 252); padding-top: 25px; margin-top: -125px;">
        <div class="container">
            <div class="col-md-12 large-search">
                <div class="search-form wow pulse">
                    <form action="" class=" form-inline">
                        <div class="col-md-12">
                            <div class="col-md-3">
                                <input type="text" class="form-control" placeholder="Tên hoặc địa chỉ nhà trọ">
                            </div>
                            <div class="col-md-3">
                                <select id="property_city__select" class="selectpicker"
                                        data-live-search="true"
                                        title="Tỉnh/Thành Phố">
                                    <!--                                        th:field="*{selectedOption}"-->
                                    <option disabled>--Chọn một tùy chọn--</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <select id="property_district__select" class="selectpicker"
                                        data-live-search="true"
                                        title="Quận/Huyện">
                                    <option disabled>--Chọn một tùy chọn--</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <select id="property_ward__select" class="selectpicker"
                                        data-live-search="true"
                                        title="Phường/Xã">
                                    <option disabled>--Chọn một tùy chọn--</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="search-row">

                                <div class="col-sm-6">
                                    <label for="price-range">Khoảng giá (₫):</label>
                                    <input type="text" class="span2" value="" data-slider-min="0"
                                           data-slider-max="20000000" data-slider-step="5"
                                           data-slider-value="[500000,2000000]" id="price-range"><br/>
                                    <b class="pull-left color">0₫</b>
                                    <b class="pull-right color">30000000₫</b>
                                </div>
                                <!-- End of  -->

                                <div class="col-sm-6">
                                    <label for="property-geo">Khoảng diện tích (m2) :</label>
                                    <input type="text" class="span2" value="" data-slider-min="0"
                                           data-slider-max="200" data-slider-step="5"
                                           data-slider-value="[15,30]" id="property-geo"><br/>
                                    <b class="pull-left color">0m2</b>
                                    <b class="pull-right color">200m2</b>
                                </div>
                                <!-- End of  -->
                            </div>
                        </div>
                        <div class="center">
                            <input type="submit" value="" class="btn btn-default btn-lg-sheach">
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>


    <!-- property area -->
    <div class="content-area recent-property" style="background-color: #FCFCFC; padding-bottom: 55px;">
        <div class="container">
            <div class="row">
                <div class="col-md-10 col-md-offset-1 col-sm-12 text-center page-title">
                    <!-- /.feature title -->
                    <h2>Phòng mới</h2>
                    <p>Nulla quis dapibus nisl. Suspendisse ultricies commodo arcu nec pretium. Nullam sed arcu
                        ultricies . </p>
                </div>
            </div>

            <div class="row">
                <div class="proerty-th" id="post-new">
                </div>
            </div>
        </div>
    </div>

    <!--Welcome area -->
    <div class="Welcome-area">
        <div class="container">
            <div class="row">
                <div class="col-md-12 Welcome-entry  col-sm-12">
                    <div class="col-md-5 col-md-offset-2 col-sm-6 col-xs-12">
                        <div class="welcome_text wow fadeInLeft" data-wow-delay="0.3s" data-wow-offset="100">
                            <div class="row">
                                <div class="col-md-10 col-md-offset-1 col-sm-12 text-center page-title">
                                    <!-- /.feature title -->
                                    <h2>GARO ESTATE </h2>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-5 col-sm-6 col-xs-12">
                        <div class="welcome_services wow fadeInRight" data-wow-delay="0.3s" data-wow-offset="100">
                            <div class="row">
                                <div class="col-xs-6 m-padding">
                                    <div class="welcome-estate">
                                        <div class="welcome-icon">
                                            <i class="pe-7s-home pe-4x"></i>
                                        </div>
                                        <h3>Any property</h3>
                                    </div>
                                </div>
                                <div class="col-xs-6 m-padding">
                                    <div class="welcome-estate">
                                        <div class="welcome-icon">
                                            <i class="pe-7s-users pe-4x"></i>
                                        </div>
                                        <h3>More Clients</h3>
                                    </div>
                                </div>


                                <div class="col-xs-12 text-center">
                                    <i class="welcome-circle"></i>
                                </div>

                                <div class="col-xs-6 m-padding">
                                    <div class="welcome-estate">
                                        <div class="welcome-icon">
                                            <i class="pe-7s-notebook pe-4x"></i>
                                        </div>
                                        <h3>Easy to use</h3>
                                    </div>
                                </div>
                                <div class="col-xs-6 m-padding">
                                    <div class="welcome-estate">
                                        <div class="welcome-icon">
                                            <i class="pe-7s-help2 pe-4x"></i>
                                        </div>
                                        <h3>Any help </h3>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--TESTIMONIALS -->
    <div class="testimonial-area recent-property" style="background-color: #FCFCFC; padding-bottom: 15px;">
        <div class="container">
            <div class="row">
                <div class="col-md-10 col-md-offset-1 col-sm-12 text-center page-title">
                    <!-- /.feature title -->
                    <h2>Khách Hàng Của Chúng Tôi Đã Nói </h2>
                </div>
            </div>

            <div class="row">
                <div class="row testimonial">
                    <div class="col-md-12">
                        <div id="testimonial-slider">
                            <div class="item">
                                <div class="client-text">
                                    <p>Hiệu quả khá cao trong khi chi phí khá thấp, không còn tình trạng phòng trống kéo
                                        dài!</p>
                                    <h4><strong>Anh Khánh, </strong><i>Chủ hệ thống phòng trọ tại Hà Nội</i></h4>
                                </div>
                                <div class="client-face wow fadeInRight" data-wow-delay=".9s">
                                    <img th:src="@{client/assets/img/client-face1.png}" alt="">
                                </div>
                            </div>
                            <div class="item">
                                <div class="client-text">
                                    <p>Hiệu quả khá cao trong khi chi phí khá thấp, không còn tình trạng phòng trống kéo
                                        dài!</p>
                                    <h4><strong>Anh Khánh, </strong><i>Chủ hệ thống phòng trọ tại Hà Nội</i></h4>
                                </div>
                                <div class="client-face">
                                    <img th:src="@{client/assets/img/client-face2.png}" alt="">
                                </div>
                            </div>
                            <div class="item">
                                <div class="client-text">
                                    <p>Hiệu quả khá cao trong khi chi phí khá thấp, không còn tình trạng phòng trống kéo
                                        dài!</p>
                                    <h4><strong>Anh Khánh, </strong><i>Chủ hệ thống phòng trọ tại Hà Nội</i></h4>
                                </div>
                                <div class="client-face">
                                    <img th:src="@{client/assets/img/client-face1.png}" alt="">
                                </div>
                            </div>
                            <div class="item">
                                <div class="client-text">
                                    <p>Hiệu quả khá cao trong khi chi phí khá thấp, không còn tình trạng phòng trống kéo
                                        dài!</p>
                                    <h4><strong>Anh Khánh, </strong><i>Chủ hệ thống phòng trọ tại Hà Nội</i></h4>
                                </div>
                                <div class="client-face">
                                    <img th:src="@{client/assets/img/client-face2.png}" alt="">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Count area -->
    <div class="count-area">
        <div class="container">
            <div class="row">
                <div class="col-md-10 col-md-offset-1 col-sm-12 text-center page-title">
                    <!-- /.feature title -->
                    <h2>Bạn có thể tin tưởng chúng tôi </h2>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12 col-xs-12 percent-blocks m-main" data-waypoint-scroll="true">
                    <div class="row">
                        <div class="col-sm-3 col-xs-6">
                            <div class="count-item">
                                <div class="count-item-circle">
                                    <span class="pe-7s-users"></span>
                                </div>
                                <div class="chart" data-percent="5000">
                                    <h2 class="percent" id="counter">0</h2>
                                    <h5>HAPPY CUSTOMER </h5>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-3 col-xs-6">
                            <div class="count-item">
                                <div class="count-item-circle">
                                    <span class="pe-7s-home"></span>
                                </div>
                                <div class="chart" data-percent="12000">
                                    <h2 class="percent" id="counter1">0</h2>
                                    <h5>Properties in stock</h5>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-3 col-xs-6">
                            <div class="count-item">
                                <div class="count-item-circle">
                                    <span class="pe-7s-flag"></span>
                                </div>
                                <div class="chart" data-percent="120">
                                    <h2 class="percent" id="counter2">0</h2>
                                    <h5>City registered </h5>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-3 col-xs-6">
                            <div class="count-item">
                                <div class="count-item-circle">
                                    <span class="pe-7s-graph2"></span>
                                </div>
                                <div class="chart" data-percent="5000">
                                    <h2 class="percent" id="counter3">5000</h2>
                                    <h5>DEALER BRANCHES</h5>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- boy-sale area -->
    <div class="boy-sale-area">
        <div class="container">
            <div class="row">

                <div class="col-md-6 col-sm-10 col-sm-offset-1 col-md-offset-0 col-xs-12">
                    <div class="asks-first">
                        <div class="asks-first-circle">
                            <span class="fa fa-search"></span>
                        </div>
                        <div class="asks-first-info">
                            <h2>ARE YOU LOOKING FOR A Property?</h2>
                            <p> varius od lio eget conseq uat blandit, lorem auglue comm lodo nisl no us nibh mas
                                lsa</p>
                        </div>
                        <div class="asks-first-arrow">
                            <a th:href="@{client/properties.html}"><span class="fa fa-angle-right"></span></a>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-sm-10 col-sm-offset-1 col-xs-12 col-md-offset-0">
                    <div class="asks-first">
                        <div class="asks-first-circle">
                            <span class="fa fa-usd"></span>
                        </div>
                        <div class="asks-first-info">
                            <h2>DO YOU WANT TO SELL A Property?</h2>
                            <p> varius od lio eget conseq uat blandit, lorem auglue comm lodo nisl no us nibh mas
                                lsa</p>
                        </div>
                        <div class="asks-first-arrow">
                            <a th:href="@{client/properties.html}"><span class="fa fa-angle-right"></span></a>
                        </div>
                    </div>
                </div>
                <div class="col-xs-12">
                    <p class="asks-call">QUESTIONS? CALL US : <span class="strong"> + 3-123- 424-5700</span></p>
                </div>
            </div>
        </div>
    </div>
    <!--Script area -->
    <script th:src="@{client/assets/js/modernizr-2.6.2.min.js}"></script>

    <script th:src="@{client/assets/js/jquery-1.10.2.min.js}"></script>
    <script th:src="@{client/bootstrap/js/bootstrap.min.js}"></script>
    <script th:src="@{client/assets/js/bootstrap-select.min.js}"></script>
    <script th:src="@{client/assets/js/bootstrap-hover-dropdown.js}"></script>

    <script th:src="@{client/assets/js/easypiechart.min.js}"></script>
    <script th:src="@{client/assets/js/jquery.easypiechart.min.js}"></script>

    <script th:src="@{client/assets/js/owl.carousel.min.js}"></script>

    <script th:src="@{client/assets/js/wow.js}"></script>

    <script th:src="@{client/assets/js/icheck.min.js}"></script>
    <script th:src="@{client/assets/js/price-range.js}"></script>

    <script th:src="@{client/assets/js/main.js}"></script>
    <!--Script area -->
    <script>
        $(document).ready(function () {
            $.ajax({
                url: "api/v1/rest/post",
                type: "GET",
                success: function (response) {
                    console.log("Success get post!");
                    $.each(response, function (index, option) {
                        let arrayRoom = option.areaResponse.roomResponses;
                        let minAcreage = arrayRoom[0]['acreage'];
                        let maxAcreage = arrayRoom[0]['acreage'];
                        let minPrice = arrayRoom[0]['rentPrice'];
                        let maxPrice = arrayRoom[0]['rentPrice'];
                        for (let i = 0; i < arrayRoom.length; i++) {
                            if (minAcreage > arrayRoom[i]['acreage']) {
                                minAcreage = arrayRoom[i]['acreage'];
                            }

                            if (maxAcreage < arrayRoom[i]['acreage']) {
                                maxAcreage = arrayRoom[i]['acreage'];
                            }

                            if (minPrice > arrayRoom[i]['rentPrice']) {
                                minPrice = arrayRoom[i]['rentPrice'];
                            }

                            if (maxPrice < arrayRoom[i]['rentPrice']) {
                                maxPrice = arrayRoom[i]['rentPrice'];
                            }
                        }
                        let formattedMinPrice = minPrice.toLocaleString('vi-VN', {style: 'currency', currency: 'VND'});
                        let formattedMaxPrice = maxPrice.toLocaleString('vi-VN', {style: 'currency', currency: 'VND'});

                        if (index > 6) {
                            $("#post-new").append("<div class=\"col-sm-6 col-md-3 p0\">\n" +
                                "                        <div class=\"box-tree more-proerty text-center\">\n" +
                                "                            <div class=\"item-tree-icon\">\n" +
                                "                                <i class=\"fa fa-th\"></i>\n" +
                                "                            </div>\n" +
                                "                            <div class=\"more-entry overflow\">\n" +
                                "                                <h5><a th:href=\"@{client/property-1.html}\">CAN'T DECIDE ? </a></h5>\n" +
                                "                                <h5 class=\"tree-sub-ttl\">Show all properties</h5>\n" +
                                "                                <button class=\"btn border-btn more-black\" value=\"All properties\">All properties</button>\n" +
                                "                            </div>\n" +
                                "                        </div>\n" +
                                "                    </div>");
                            return false;
                        }

                        $("#post-new").append("<div class=\"col-sm-6 col-md-3 p0\">\n" +
                            "                        <div class=\"box-two proerty-item\">\n" +
                            "                            <div class=\"item-thumb\">\n" +
                            "                                <a th:href=\"@{client/property-1.html}\"><img\n" +
                            "                                        th:src=\"@{client/assets/img/demo/property-1.jpg}\"></a>\n" +
                            "                            </div>\n" +
                            "                            <div class=\"item-entry overflow\">\n" +
                            "                                <h5><a th:href=\"@{client/property-1.html}\">" + option.title + " </a></h5>\n" +
                            "                                <div class=\"dot-hr\"></div>\n" +
                            "                                <span class=\"pull-left\"><b>Diện tích :</b> " + minAcreage + "m2 - " + maxAcreage + "m2 </span>\n" +
                            "                                <p class=\"proerty-price pull-left\"><b>Giá :</b> " + formattedMinPrice + " - " + formattedMaxPrice + "</p>\n" +
                            "                            </div>\n" +
                            "                        </div>\n" +
                            "                    </div>");
                    });
                },
                error: function (xhr, status, error) {
                    console.log("Error: " + error);
                }
            });

            $.ajax({
                url: "api/v1/rest/province",
                type: "GET",
                success: function (response) {
                    console.log("Success get province!");
                    $.each(response, function (index, option) {
                        $("#property_city__select").append("<option value='" + option.id + "'>" + option.name + "</option>");
                    });
                    $("#property_city__select").selectpicker("refresh");
                },
                error: function (xhr, status, error) {
                    console.log("Error: " + error);
                }
            });

            $("#property_city__select").change(function () {
                let selectedOption = $(this).val();
                clearElementSelection("property_district__select", "property_ward__select");
                console.log("api/v1/rest/district/province/" + selectedOption);
                $.ajax({
                    url: "api/v1/rest/district/province/" + selectedOption,
                    type: "GET",
                    success: function (response) {
                        console.log("Success get district!");
                        $.each(response, function (index, option) {
                            $("#property_district__select").append("<option value='" + option.id + "'>" + option.name + "</option>");
                        });
                        $("#property_district__select").selectpicker("refresh");
                    },
                    error: function (xhr, status, error) {
                        console.log("Error: " + error);
                    }
                });
            });

            $("#property_district__select").change(function () {
                let selectedOption = $(this).val();
                console.log("api/v1/rest/ward/district/" + selectedOption);
                clearElementSelection("property_ward__select");
                $.ajax({
                    url: "api/v1/rest/ward/district/" + selectedOption,
                    type: "GET",
                    success: function (response) {
                        console.log("Success get ward!");
                        $.each(response, function (index, option) {
                            $("#property_ward__select").append("<option value='" + option.id + "'>" + option.name + "</option>");
                        });
                        $("#property_ward__select").selectpicker("refresh");
                    },
                    error: function (xhr, status, error) {
                        console.log("Error: " + error);
                    }
                });
            });

            function clearElementSelection() {
                for (let param of arguments) {
                    console.log(param);
                    let selectElement = document.getElementById(param);
                    let selectOptions = selectElement.options;
                    for (let i = selectOptions.length - 1; i >= 0; i--) {
                        selectOptions[i].remove(); // Xóa tùy chọn
                    }
                    let defaultOption = document.createElement("option");
                    defaultOption.text = "--Chọn một tùy chọn--";
                    defaultOption.value = "";
                    defaultOption.disabled = true;
                    defaultOption.selected = true;
                    selectElement.add(defaultOption); // Thêm tùy chọn mặc định
                }
            }
        });
    </script>
</div>
</body>
</html>